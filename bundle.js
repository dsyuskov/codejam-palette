!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);o(1);let r=512,n=[],c=4;localStorage.getItem("image")&&(n=JSON.parse(localStorage.getItem("image")),c=n.length);let l,a,s=r/c,i="pensil",u=k,f=localStorage.getItem("currentColor")?localStorage.getItem("currentColor"):"#000000",d=localStorage.getItem("prevColor")?localStorage.getItem("prevColor"):"#ffffff",m=!1;const v=document.getElementById("canvas");v.width=r,v.height=512;const g=v.getContext("2d");function y(e){const t=document.querySelector(`.tools__item--${e}`);switch(t&&(document.querySelector(`.tools__item--${i}`).classList.remove("selected"),u(),i=e,t.classList.add("selected"),localStorage.setItem("currentTool",i)),e){case"paint-bucket":v.addEventListener("mousedown",_),u=p;break;case"choose-color":v.addEventListener("mousedown",E),u=h;break;case"pensil":S(),u=k;break;case"move":selectMove(),u=unSelectMove;break;case"save":K(),u=L;break;case"select-color":b.click();break;default:S(),u=k}}localStorage.getItem("image")?function(e,t){let o=0,r=0,n=0;o=512/t.length;for(let c of t){for(let t of c)P(e,n,r,o,t),r++;n++,r=0}}(g,n):j(),document.querySelectorAll(".switcher__item").forEach(e=>{e.addEventListener("click",()=>(function(e){document.querySelector(`.switcher__item--${c}`).classList.remove("selected"),e.classList.add("selected"),c=e.dataset.canvassize,s=r/c,j(),localStorage.setItem("canvasSize",c)})(e)),e.dataset.canvassize==c&&e.classList.add("selected")}),document.querySelectorAll(".tools__item").forEach(e=>{e.addEventListener("click",()=>y(e.dataset.type)),e.dataset.type===i&&(e.classList.add("selected"),S())}),document.addEventListener("keydown",e=>y(function(e){switch(e){case"KeyP":return"pensil";case"KeyB":return"paint-bucket";case"KeyC":return"select-color";case"KeyS":return"save"}}(e.code)));const b=document.getElementById("current-color");function p(){v.removeEventListener("mousedown",_)}function h(){v.removeEventListener("mousedown",E)}function S(){v.addEventListener("mousedown",x),v.addEventListener("mousemove",M),v.addEventListener("mouseup",O),v.addEventListener("mouseout",O)}function k(){v.removeEventListener("mousedown",x),v.removeEventListener("mousemove",M),v.removeEventListener("mouseup",O),v.removeEventListener("mouseout",O)}function L(){}function E(e){let{x:t,y:o}=q(e);C(n[t][o])}function C(e){f!==e&&(d=f,f=e,localStorage.setItem("currentColor",f),localStorage.setItem("prevColor",d),l.style.backgroundColor=f,a.style.backgroundColor=d)}function _(e){let{x:t,y:o}=q(e);!function(e,t,o,r){let l=[[e,t]];for(let e=0;e!=l.length;e++){let t=l[e][0],a=l[e][1];if(t>=0&&a>=0&&t<c&&a<c&&n[t][a]==o){P(g,t,a,s,r);let e=l.length;l[e]=[t+1,a],l[e+1]=[t-1,a],l[e+2]=[t,a+1],l[e+3]=[t,a-1]}}}(t,o,n[t][o],f)}b.addEventListener("change",e=>{C(e.target.value)}),document.querySelectorAll(".colors__item").forEach(e=>{if(e.addEventListener("click",()=>(function(e){switch(e){case"current":b.click(),l.style.backgroundColor=f;break;case"prev":C(d);break;default:C(e)}})(e.dataset.color)),null!==e.firstChild)switch(e.dataset.color){case"current":l=e.firstChild,e.firstChild.style.backgroundColor=f;break;case"prev":a=e.firstChild,e.firstChild.style.backgroundColor=d;break;default:e.firstChild.style.backgroundColor=e.dataset.color}});let w=0,I=0;function x(e){let{x:t,y:o}=q(e);P(g,t,o,s,f),w=t,I=o,m=!0}function M(e){let{x:t,y:o}=q(e);m&&function(e,t,o,r){let n=Math.abs(o-e),c=Math.abs(r-t),l=e<o?1:-1,a=t<r?1:-1,i=n-c;P(g,o,r,s,f);for(;e!=o||t!=r;){P(g,e,t,s,f);let o=2*i;o>-c&&(i-=c,e+=l),o<n&&(i+=n,t+=a)}}(w,I,t,o),w=t,I=o}function O(){m=!1}function j(){n=[];for(let e=0;e<c;e++){n[e]=[];for(let t=0;t<c;t++)n[e][t]="#ffffff",P(g,e,t,s,"#ffffff")}K()}function q(e){return{x:Math.floor(e.offsetX/s),y:Math.floor(e.offsetY/s)}}function P(e,t,o,r,c){n[t][o]=c,e.fillStyle=c,e.fillRect(t*r,o*r,r,r)}function K(){localStorage.setItem("image",JSON.stringify(n))}},function(e,t){}]);